from src import plaintext as pt
import pytest


# @pytest.mark.skip()
def test_plaintext():
    key = {'x_init': 0.232323, 'ctrl_param': 3.8, 'charmap': {'\x00': (0.2, 0.20234375000000002), '\x01': (0.20234375000000002, 0.20468750000000002), '\x02': (0.20468750000000002, 0.20703125), '\x03': (0.20703125, 0.209375), '\x04': (0.209375, 0.21171875), '\x05': (0.21171875, 0.21406250000000002), '\x06': (0.21406250000000002, 0.21640625000000002), '\x07': (0.21640625000000002, 0.21875), '\x08': (0.21875, 0.22109375), '\t': (0.22109375, 0.2234375), '\n': (0.2234375, 0.22578125000000002), '\x0b': (0.22578125000000002, 0.22812500000000002), '\x0c': (0.22812500000000002, 0.23046875), '\r': (0.23046875, 0.23281250000000003), '\x0e': (0.23281250000000003, 0.23515625), '\x0f': (0.23515625, 0.23750000000000002), '\x10': (0.23750000000000002, 0.23984375000000002), '\x11': (0.23984375000000002, 0.2421875), '\x12': (0.2421875, 0.24453125000000003), '\x13': (0.24453125000000003, 0.246875), '\x14': (0.246875, 0.24921875000000002), '\x15': (0.24921875000000002, 0.2515625), '\x16': (0.2515625, 0.25390625), '\x17': (0.25390625, 0.25625000000000003), '\x18': (0.25625000000000003, 0.25859375), '\x19': (0.25859375, 0.26093750000000004), '\x1a': (0.26093750000000004, 0.26328125), '\x1b': (0.26328125, 0.265625), '\x1c': (0.265625, 0.26796875000000003), '\x1d': (0.26796875000000003, 0.2703125), '\x1e': (0.2703125, 0.27265625000000004), '\x1f': (0.27265625000000004, 0.275), ' ': (0.275, 0.27734375), '!': (0.27734375, 0.27968750000000003), '"': (0.27968750000000003, 0.28203125), '#': (0.28203125, 0.28437500000000004), '$': (0.28437500000000004, 0.28671875), '%': (0.28671875, 0.2890625), '&': (0.2890625, 0.29140625000000003), "'": (0.29140625000000003, 0.29375), '(': (0.29375, 0.29609375000000004), ')': (0.29609375000000004, 0.2984375), '*': (0.2984375, 0.30078125), '+': (0.30078125, 0.30312500000000003), ',': (0.30312500000000003, 0.30546875), '-': (0.30546875, 0.30781250000000004), '.': (0.30781250000000004, 0.31015625), '/': (0.31015625, 0.3125), '0': (0.3125, 0.31484375000000003), '1': (0.31484375000000003, 0.3171875), '2': (0.3171875, 0.31953125000000004), '3': (0.31953125000000004, 0.321875), '4': (0.321875, 0.32421875), '5': (0.32421875, 0.32656250000000003), '6': (0.32656250000000003, 0.32890625000000007), '7': (0.32890625000000007, 0.33125000000000004), '8': (0.33125000000000004, 0.33359375), '9': (0.33359375, 0.3359375), ':': (0.3359375, 0.33828125000000003), ';': (0.33828125000000003, 0.34062500000000007), '<': (0.34062500000000007, 0.34296875000000004), '=': (0.34296875000000004, 0.3453125), '>': (0.3453125, 0.34765625), '?': (0.34765625, 0.35000000000000003), '@': (0.35000000000000003, 0.35234375000000007), 'A': (0.35234375000000007, 0.35468750000000004), 'B': (0.35468750000000004, 0.35703125), 'C': (0.35703125, 0.359375), 'D': (0.359375, 0.36171875000000003), 'E': (0.36171875000000003, 0.36406250000000007), 'F': (0.36406250000000007, 0.36640625000000004), 'G': (0.36640625000000004, 0.36875), 'H': (0.36875, 0.37109375), 'I': (0.37109375, 0.37343750000000003), 'J': (0.37343750000000003, 0.37578125000000007), 'K': (0.37578125000000007, 0.37812500000000004), 'L': (0.37812500000000004, 0.38046875), 'M': (0.38046875, 0.3828125), 'N': (0.3828125, 0.38515625000000003), 'O': (0.38515625000000003, 0.38750000000000007), 'P': (0.38750000000000007, 0.38984375000000004), 'Q': (0.38984375000000004, 0.3921875), 'R': (0.3921875, 0.39453125), 'S': (0.39453125, 0.39687500000000003), 'T': (0.39687500000000003, 0.39921875000000007), 'U': (0.39921875000000007, 0.40156250000000004), 'V': (0.40156250000000004, 0.40390625), 'W': (0.40390625, 0.40625000000000006), 'X': (0.40625000000000006, 0.40859375000000003), 'Y': (0.40859375000000003, 0.41093750000000007), 'Z': (0.41093750000000007, 0.41328125000000004), '[': (0.41328125000000004, 0.415625), '\\': (0.415625, 0.41796875000000006), ']': (0.41796875000000006, 0.42031250000000003), '^': (0.42031250000000003, 0.42265625000000007), '_': (0.42265625000000007, 0.42500000000000004), '`': (0.42500000000000004, 0.42734375), 'a': (0.42734375, 0.42968750000000006), 'b': (0.42968750000000006, 0.43203125000000003), 'c': (0.43203125000000003, 0.43437500000000007), 'd': (0.43437500000000007, 0.43671875000000004), 'e': (0.43671875000000004, 0.4390625), 'f': (0.4390625, 0.44140625000000006), 'g': (0.44140625000000006, 0.44375000000000003), 'h': (0.44375000000000003, 0.44609375000000007), 'i': (0.44609375000000007, 0.44843750000000004), 'j': (0.44843750000000004, 0.45078125), 'k': (0.45078125, 0.45312500000000006), 'l': (0.45312500000000006, 0.45546875000000003), 'm': (0.45546875000000003, 0.45781250000000007), 'n': (0.45781250000000007, 0.46015625000000004), 'o': (0.46015625000000004, 0.4625000000000001), 'p': (0.4625000000000001, 0.46484375000000006), 'q': (0.46484375000000006, 0.46718750000000003), 'r': (0.46718750000000003, 0.46953125000000007), 's': (0.46953125000000007, 0.47187500000000004), 't': (0.47187500000000004, 0.4742187500000001), 'u': (0.4742187500000001, 0.47656250000000006), 'v': (0.47656250000000006, 0.47890625000000003), 'w': (0.47890625000000003, 0.48125000000000007), 'x': (0.48125000000000007, 0.48359375000000004), 'y': (0.48359375000000004, 0.4859375000000001), 'z': (0.4859375000000001, 0.48828125000000006), '{': (0.48828125000000006, 0.49062500000000003), '|': (0.49062500000000003, 0.49296875000000007), '}': (0.49296875000000007, 0.49531250000000004), '~': (0.49531250000000004, 0.4976562500000001), '\x7f': (0.4976562500000001, 0.5), '\x80': (0.5, 0.5023437500000001), '\x81': (0.5023437500000001, 0.5046875000000001), '\x82': (0.5046875000000001, 0.50703125), '\x83': (0.50703125, 0.5093750000000001), '\x84': (0.5093750000000001, 0.51171875), '\x85': (0.51171875, 0.5140625000000001), '\x86': (0.5140625000000001, 0.5164062500000001), '\x87': (0.5164062500000001, 0.51875), '\x88': (0.51875, 0.5210937500000001), '\x89': (0.5210937500000001, 0.5234375), '\x8a': (0.5234375, 0.5257812500000001), '\x8b': (0.5257812500000001, 0.5281250000000001), '\x8c': (0.5281250000000001, 0.53046875), '\x8d': (0.53046875, 0.5328125000000001), '\x8e': (0.5328125000000001, 0.53515625), '\x8f': (0.53515625, 0.5375000000000001), '\x90': (0.5375000000000001, 0.5398437500000001), '\x91': (0.5398437500000001, 0.5421875), '\x92': (0.5421875, 0.5445312500000001), '\x93': (0.5445312500000001, 0.546875), '\x94': (0.546875, 0.5492187500000001), '\x95': (0.5492187500000001, 0.5515625000000001), '\x96': (0.5515625000000001, 0.55390625), '\x97': (0.55390625, 0.5562500000000001), '\x98': (0.5562500000000001, 0.55859375), '\x99': (0.55859375, 0.5609375000000001), '\x9a': (0.5609375000000001, 0.5632812500000001), '\x9b': (0.5632812500000001, 0.565625), '\x9c': (0.565625, 0.5679687500000001), '\x9d': (0.5679687500000001, 0.5703125), '\x9e': (0.5703125, 0.5726562500000001), '\x9f': (0.5726562500000001, 0.5750000000000001), '\xa0': (0.5750000000000001, 0.57734375), '¡': (0.57734375, 0.5796875000000001), '¢': (0.5796875000000001, 0.58203125), '£': (0.58203125, 0.5843750000000001), '¤': (0.5843750000000001, 0.5867187500000001), '¥': (0.5867187500000001, 0.5890625), '¦': (0.5890625, 0.5914062500000001), '§': (0.5914062500000001, 0.59375), '¨': (0.59375, 0.5960937500000001), '©': (0.5960937500000001, 0.5984375000000001), 'ª': (0.5984375000000001, 0.60078125), '«': (0.60078125, 0.6031250000000001), '¬': (0.6031250000000001, 0.60546875), '\xad': (0.60546875, 0.6078125000000001), '®': (0.6078125000000001, 0.6101562500000001), '¯': (0.6101562500000001, 0.6125), '°': (0.6125, 0.6148437500000001), '±': (0.6148437500000001, 0.6171875), '²': (0.6171875, 0.6195312500000001), '³': (0.6195312500000001, 0.6218750000000001), '´': (0.6218750000000001, 0.62421875), 'µ': (0.62421875, 0.6265625000000001), '¶': (0.6265625000000001, 0.62890625), '·': (0.62890625, 0.6312500000000001), '¸': (0.6312500000000001, 0.6335937500000001), '¹': (0.6335937500000001, 0.6359375), 'º': (0.6359375, 0.6382812500000001), '»': (0.6382812500000001, 0.640625), '¼': (0.640625, 0.6429687500000001), '½': (0.6429687500000001, 0.6453125000000001), '¾': (0.6453125000000001, 0.64765625), '¿': (0.64765625, 0.6500000000000001), 'À': (0.6500000000000001, 0.65234375), 'Á': (0.65234375, 0.6546875000000001), 'Â': (0.6546875000000001, 0.6570312500000001), 'Ã': (0.6570312500000001, 0.659375), 'Ä': (0.659375, 0.6617187500000001), 'Å': (0.6617187500000001, 0.6640625), 'Æ': (0.6640625, 0.6664062500000001), 'Ç': (0.6664062500000001, 0.6687500000000001), 'È': (0.6687500000000001, 0.67109375), 'É': (0.67109375, 0.6734375000000001), 'Ê': (0.6734375000000001, 0.67578125), 'Ë': (0.67578125, 0.6781250000000001), 'Ì': (0.6781250000000001, 0.6804687500000001), 'Í': (0.6804687500000001, 0.6828125), 'Î': (0.6828125, 0.6851562500000001), 'Ï': (0.6851562500000001, 0.6875), 'Ð': (0.6875, 0.6898437500000001), 'Ñ': (0.6898437500000001, 0.6921875000000001), 'Ò': (0.6921875000000001, 0.69453125), 'Ó': (0.69453125, 0.6968750000000001), 'Ô': (0.6968750000000001, 0.6992187500000001), 'Õ': (0.6992187500000001, 0.7015625000000001), 'Ö': (0.7015625000000001, 0.7039062500000002), '×': (0.7039062500000002, 0.70625), 'Ø': (0.70625, 0.7085937500000001), 'Ù': (0.7085937500000001, 0.7109375), 'Ú': (0.7109375, 0.7132812500000001), 'Û': (0.7132812500000001, 0.7156250000000002), 'Ü': (0.7156250000000002, 0.71796875), 'Ý': (0.71796875, 0.7203125000000001), 'Þ': (0.7203125000000001, 0.72265625), 'ß': (0.72265625, 0.7250000000000001), 'à': (0.7250000000000001, 0.7273437500000002), 'á': (0.7273437500000002, 0.7296875), 'â': (0.7296875, 0.7320312500000001), 'ã': (0.7320312500000001, 0.734375), 'ä': (0.734375, 0.7367187500000001), 'å': (0.7367187500000001, 0.7390625000000002), 'æ': (0.7390625000000002, 0.74140625), 'ç': (0.74140625, 0.7437500000000001), 'è': (0.7437500000000001, 0.74609375), 'é': (0.74609375, 0.7484375000000001), 'ê': (0.7484375000000001, 0.7507812500000002), 'ë': (0.7507812500000002, 0.753125), 'ì': (0.753125, 0.7554687500000001), 'í': (0.7554687500000001, 0.7578125), 'î': (0.7578125, 0.7601562500000001), 'ï': (0.7601562500000001, 0.7625000000000002), 'ð': (0.7625000000000002, 0.76484375), 'ñ': (0.76484375, 0.7671875000000001), 'ò': (0.7671875000000001, 0.76953125), 'ó': (0.76953125, 0.7718750000000001), 'ô': (0.7718750000000001, 0.7742187500000002), 'õ': (0.7742187500000002, 0.7765625), 'ö': (0.7765625, 0.7789062500000001), '÷': (0.7789062500000001, 0.78125), 'ø': (0.78125, 0.7835937500000001), 'ù': (0.7835937500000001, 0.7859375000000002), 'ú': (0.7859375000000002, 0.78828125), 'û': (0.78828125, 0.7906250000000001), 'ü': (0.7906250000000001, 0.79296875), 'ý': (0.79296875, 0.7953125000000001), 'þ': (0.7953125000000001, 0.7976562500000002), 'ÿ': (0.7976562500000002, 0.8)}}
    ciphertext = [2077, 5]
    plaintext = pt.PlainText(key)
    msg = plaintext.decrypt_ciphertext(ciphertext)
    # print(msg)
    assert msg == 'hi'